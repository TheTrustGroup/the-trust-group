@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Editorial design system — calm, authoritative, high-trust.
   Elite engineering / defense-adjacent. Zero layout shift enforced.
   ========================================================================== */

/* ---------------------------------------------------------------------------
   Z-Index scale (stable stacking context)
   --------------------------------------------------------------------------- */
:root {
  --z-base: 0;
  --z-dropdown: 1000;
  --z-sticky: 1100;
  --z-fixed: 1200;
  --z-modal-backdrop: 1300;
  --z-modal: 1400;
  --z-popover: 1500;
  --z-tooltip: 1600;
  --z-toast: 1700;
  --z-maximum: 9999;
}

/* ---------------------------------------------------------------------------
   Editorial color tokens (light)
   --------------------------------------------------------------------------- */
@layer base {
  :root {
    --background: 40 20% 98%;
    --foreground: 220 20% 12%;
    --card: 40 15% 99%;
    --card-foreground: 220 20% 12%;
    --popover: 40 15% 99%;
    --popover-foreground: 220 20% 12%;
    --primary: 220 45% 18%;
    --primary-foreground: 40 20% 98%;
    --primary-hover: 220 45% 14%;
    --primary-muted: 220 25% 92%;
    --secondary: 220 15% 92%;
    --secondary-foreground: 220 20% 18%;
    --muted: 40 15% 95%;
    --muted-foreground: 220 10% 42%;
    --accent: 220 45% 18%;
    --accent-foreground: 40 20% 98%;
    --border: 220 12% 90%;
    --input: 220 12% 92%;
    --ring: 220 45% 25%;
    --radius: 0.25rem;
    /* Legacy tokens for existing components */
    --primary-light: 220 25% 92%;
    --primary-dark: 220 45% 14%;
    --destructive: 0 70% 45%;
    --destructive-foreground: 0 0% 100%;
  }

  .dark {
    --background: 220 25% 8%;
    --foreground: 40 15% 95%;
    --card: 220 22% 10%;
    --card-foreground: 40 15% 95%;
    --popover: 220 22% 10%;
    --popover-foreground: 40 15% 95%;
    --primary: 40 20% 96%;
    --primary-foreground: 220 45% 12%;
    --primary-hover: 40 20% 92%;
    --primary-muted: 220 20% 18%;
    --secondary: 220 20% 16%;
    --secondary-foreground: 40 15% 95%;
    --muted: 220 18% 14%;
    --muted-foreground: 220 10% 65%;
    --accent: 40 20% 96%;
    --accent-foreground: 220 45% 12%;
    --border: 220 18% 20%;
    --input: 220 18% 16%;
    --ring: 40 20% 90%;
    --primary-light: 220 20% 18%;
    --primary-dark: 220 35% 25%;
    --destructive: 0 65% 50%;
    --destructive-foreground: 0 0% 100%;
  }
}

/* ---------------------------------------------------------------------------
   Base typography & layout (no shift)
   --------------------------------------------------------------------------- */
/* Luxury typography: we decide breaks, not the browser. No mid-word hyphenation. */
@layer base {
  * {
    @apply border-border;
    box-sizing: border-box;
  }

  html {
    overflow-x: hidden;
    max-width: 100vw;
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-sans), system-ui, sans-serif;
    font-size: 1rem;
    line-height: 1.65;
    word-break: normal;
    overflow-wrap: normal;
    hyphens: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
    width: 100%;
  }

  /* Serif headlines — luxury, editorial, tight leading. No decoration. */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-serif), Georgia, serif;
    font-weight: 500;
    letter-spacing: -0.02em;
    color: inherit;
  }

  h1 { font-size: clamp(2.5rem, 5vw, 4.5rem); line-height: 1.06; letter-spacing: -0.03em; margin-bottom: 0.5em; }
  h2 { font-size: clamp(2rem, 4vw, 3.75rem); line-height: 1.08; letter-spacing: -0.025em; margin-bottom: 0.5em; }
  h3 { font-size: clamp(1.5rem, 3vw, 2.5rem); line-height: 1.1; letter-spacing: -0.02em; margin-bottom: 0.45em; }
  h4 { font-size: 1.5rem; line-height: 1.2; margin-bottom: 0.4em; }
  h5 { font-size: 1.25rem; line-height: 1.25; margin-bottom: 0.35em; }
  h6 { font-size: 1.125rem; line-height: 1.3; margin-bottom: 0.3em; }

  p {
    margin-bottom: 1.25em;
    max-width: 65ch;
  }

  p:last-child {
    margin-bottom: 0;
  }

  /*
   * Example typography scale (Tailwind classes)
   * — Serif headlines: font-serif + tight leading. Body: font-sans + generous leading.
   * — Use sparingly. Timeless, expensive, quiet.
   *
   * DISPLAY (hero / marquee):  text-display-1 | text-display-2 | text-display-3
   * HEADLINES:                 text-headline-3xl → text-headline-sm
   * BODY:                      text-body-lg | text-body | text-body-sm | text-body-xs
   * SPACING:                   section (6rem) | section-sm (4rem) | section-lg (8rem)
   * PROSE WIDTH:               max-w-prose (65ch) for readable body blocks
   */

  /* Zero layout shift: images must have explicit width and height in markup.
     Use Next.js Image with width/height or raw img with width/height. */
  img {
    max-width: 100%;
    height: auto;
    vertical-align: middle;
  }

  /* Reserve space when width/height are set (e.g. next/image) */
  img[width][height] {
    height: auto;
  }

  main {
    overflow-x: hidden;
    max-width: 100%;
    position: relative;
  }

  section {
    position: relative;
  }
}

/* ---------------------------------------------------------------------------
   Accessibility
   --------------------------------------------------------------------------- */
@layer base {
  *:focus-visible {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

@layer utilities {
  .skip-to-main {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md;
    z-index: var(--z-tooltip);
  }

  .container-content {
    @apply mx-auto w-full max-w-editorial px-4 sm:px-6 lg:px-8;
  }

  /* Generous whitespace — use between sections for quiet, editorial rhythm */
  .space-section { margin-bottom: 6rem; }
  .space-section-sm { margin-bottom: 4rem; }
  .space-section-lg { margin-bottom: 8rem; }
}

/* ---------------------------------------------------------------------------
   Reduced motion
   --------------------------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
